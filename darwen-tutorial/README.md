# The Relational Model: a Tutorial


このノートでは、Hugh Darwen の
[The Relational Model: a Tutorial][Tutorial] (PDF)
を参考にして、関係モデルの基本機能を例示する
チュートリアルを甲州記法に翻訳します。
実行結果の一覧は `example` ディレクトリのなかの
[入出力リスト][README.md] にあります。

2014 年現在、普及している関係データベースは、
実際には、SQL データベースであり、
SQL は理論と実現形の間に不一致をかかえているため、
初学者にも熟練者にも、扱いづらい面があります。
このチュートリアルは、[SQL] ではなく、
Darwen と Date が設計した [Tutorial D]
というデータベース言語を使って説明することで、
より整合性のとれた、見通しのよい説明を与えています。
甲州記法も関係モデルに準拠した言語であるため、
具体的な言語をとおして、理論を正確に理解できます。

チュートリアルは 15 ページの文書で、
(1) 定義、(2) 関係代数、(3) 整合性制約の 3 つの節からなります。
このうち「定義」の節は計算例を含んでいないので、
[入出力リスト][README.md] の例は
「関係代数」と「整合性制約」から引用、翻訳したものです。

本文を読む助けとするために、このノートでは、
用語集だけを日本語で提供します。
各節ごとの出現順に用語を説明しています。


定義
------------------------------------------------------------------

#### 定義 1 ページ

* **関係モデル** relational model —
  関係を演算対象とする計算体系。
  関係データベース (リレーショナル・データベース / RDB) は、
  関係モデルを応用した技術です。

* **関係** relation —
  属性間に成立する組み合わせを、すべて集めたもの。
  なにかを数える計算では、数が基本単位であるように、
  関係モデルでの計算は、関係を基本単位とします。

* **The Third Manifesto** —
  Darwen と Date によって提案された
  関係モデルの本来のあるべき姿を規定した文書。
  関連資料が [The Third Manifesto のサイト][TTM] にまとめられています。

* **Tutorial D** —
  Darwen と Date が The Third Manifesto
  に準拠するように設計した関係型データ言語。
  データ言語 D ファミリーの教育用言語が Tutorial D とよばれます。

* **命題** proposition —
  なにかが成立するか否かを判断可能な文。
  関係の本体のなかの各組は、それ自体では命題ではありませんが、
  データを解釈するときに、命題に対応させます。

* **指示子** designator —
  特定の対象や概念を指示可能な記号。
  個々の命題は指示子を含んでおり、
  その指示子をパラメータに置き換えると述語が得られます。

* **パラメータ** parameter —
  述語に含まれる記号で、指示子に置き換え可能な部分。

* **述語** predicate —
  命題のひな形。そのひな形に含まれるパラメータを
  具体的な指示子で置き換えると命題が得られます。
  関係のなかの各組は、命題に対応させて解釈できるため、
  関係の型は、述語に対応させて解釈できます。

#### 定義 2 ページ

* **組** tuple —
  属性間に成立する組み合わせ。関係の本体の構成要素になります。

* **見出し** heading —
  関係の構成要素のうち、データの形式を指定する部分。
  関係の見出しは、関係の属性の集合として表現されます。

* **本体** body —
  関係の構成要素のうち、データそのものの部分。
  関係の本体は、見出しにしたがった組の集合になります。

* **属性** attribute —
  指示子を保持する場所。
  「[属性]」は、関係モデルの理論で一般的な用語ですが、
  甲州記法では、代わりに、「項目」(term) という用語を使います。
  というのは、「属性」の場合、それが関係の性質であるかのように感じられますが、
  実際には、項目の組み合わせとして関係が認識されるからです。

* **次元** degree —
  関係の属性の数のこと。

* **濃度** cardinality —
  関係の本体に含まれる組の数のこと。

* **充足する** satisfy —
  述語のパラメータを関係のなかの組で具体化した命題が、
  実際に、成立すること。

* **閉世界仮説** closed world assumption —
  正しいと判断され、記録された命題以外は、
  正しくないとみなす仮定のこと。
  これによって、情報系が記述する世界を単純化し、
  技術の適用境界が明瞭になります。

* **具体化** instantiation —
  述語のパラメータを、関係のなかの組で置き換えて、特定の命題を得ること。

* **外延** extension —
  関係の述語をみたす組をすべて集めたもの。

#### 定義 3 ページ

* **値** value —
  指示子の具体形。

* **型** type —
  値の集合に名前をつけたもので、
  その値に適用可能な演算子を判断するための構成物。

* **スカラー型** scalar type —
  型の構成による分類として、複数の型を組み合わせていないもの。

* **組型** tuple type —
  型の構成による分類として、すべての組の集合をあらわす型。

* **関係型** relation type —
  型の構成による分類として、すべての関係の集合をあらわす型。

* **BOOLEAN** —
  TRUE と FALSE だけをもつ型。
  Tutorial D で最低限必要なスカラー型のひとつ。

* **組み込み型** built-in types —
  型の定義方法の分類として、処理系が最初から提供している型。

* **利用者定義型** user-defined types —
  型の定義方法の分類として、処理系が最初から提供していない型。
  処理系の利用者によって定義された型。

#### 定義 4 ページ

* **順序対** ordered pair —
  ふたつの値を、1 番目の値と 2 番目の値というように、
  順序をともなって組にしたもの。
  関係モデルの組は、数学で使われる組と異なり、
  属性名をともなうことで、順序を取り除き、
  データ処理分野へ適用しやすいようにしています。

* **関係変数** relvar —
  データベース内に関係を保持するための変数。

* **表現の統一性の原理** the principle of uniformity of representation —
  データベース内のすべての情報は、関係という統一された形式で表現されること。
  もともと、Codd が「情報の原理」(the information principle) とよんでいたもの。


関係代数
------------------------------------------------------------------

#### 関係代数 5 ページ

* **関係代数** relational algebra —
  関係モデルの計算体系と、代数系として定式化したもの。

* **閉じている** closed over —
  演算体系で定義された演算を使って、計算を繰り返したときに、
  演算体系内の演算対象しか計算されないこと。
  関係モデルでは、関係に対して、関係代数の演算を適用すると、
  その結果が関係にしかならないこと。

* **関係完備** relationally complete —
  関係モデルの具体的な計算体系の計算能力をあらあわす基準で、
  関係系から関係系へのすべての計算を表現できるときに、
  その計算体系は関係完備であるとよばれます。

* **関係系** system of relations —
  このチュートリアルでは、関係系という用語はでてきません。
  関係系は、複数の関係を組織化して、ひとつの系としてとらえたものを意味します。
  関係モデルによる計算は、関係系から関係系への変換として定式化できます。


#### 関係代数 6 ページ

* **Rel** —
  Tutorial D を実装した処理系のひとつ。
  処理系は [SourceForge][Rel] からダウンロードできます。

* **射影** projection —
  関係を変換する計算の一種で、属性を減らした関係をつくる計算。
  指定した属性を残す演算と、指定した属性を削る演算があります。

#### 関係代数 7 ページ

* **正規形** normal form —
  関係系間の導出可能関係の観点からもとめた、
  最初の導出元までさかのぼった関係系の形式。

* **結合** join —
  ふたつの関係を合成する計算の一種で、
  それぞれの関係に含まれる組が両立するかどうかを基準として、
  関係を合成すること。
  ふたつの組の共有属性が一致するとき、そのときのみ、
  それらの組が両立すると判定します。
  Tutorial D では A join B という計算式であらわされます。

#### 関係代数 8 ページ

* **可換** commutative —
  2 項演算子のふたつの演算対象を交換しても、演算結果が変わらないこと。
  関係モデルでは、たとえば、A join B = B join A であること。

* **結合的** associative —
  2 項演算子をつなげたときに、演算順序を変えても、演算結果が変わらないこと。
  関係モデルでは、たとえば、A join (B join C) = (A join B) join C であること。

* **共有属性** common attribute —
  ふたつの関係間での同名の属性を共有属性とよびます。
  結合演算では、共有属性が一致するかどうかで、組が両立するかどうかが判定されます。
  これは、連立方程式が同名の変数を共有しているのと同じことです。

* **差結合** antijoin —
  ふたつの関係を合成する計算の一種で、第 1 の関係のうち、
  第 2 の関係と両立しない組だけを残す計算。
  Tutorial D では A not matching B という計算式であらわされます。

#### 関係代数 9 ページ

* **合併** union —
  ふたつの関係を合成する計算の一種で、
  少なくとも一方の関係に含まれる組であれば、
  結果の関係にも含まれるように、ふたつの関係を合併する計算。
  Tutorial D では A union B という計算式であらわされます。
  関係束という代数系では、一般化された union が定式化されますが、
  Tutorial D は、そのような演算をもっていません。
  
* **関係リテラル** relation literal —
  関係値をあらわす記号列。

#### 関係代数 11 ページ

* **制限** restriction —
  関係を変換する計算の一種で、
  指定された条件をみたす組のみからなる関係に変換する計算。

* **拡張** extension —
  関係を変換する計算の一種で、
  指定された方法で計算された値をもつ
  新しい属性を追加した関係に変換する計算。

#### 関係代数 12 ページ

* **要約** summarization —
  ふたつの関係を合成する計算の一種で、
  一方の関係の各組と両立可能な他方の組の集合を見出し、
  その組の集合の性質、たとえば、濃度や合計などを計算すること。

* **属性名変更** attribute renaming —
  関係の属性の名前を、別の名前に変える計算。


整合性制約
------------------------------------------------------------------

#### 整合性制約 13 ページ

* **整合性制約** integrity constraint —
  関係系がみたすべき条件を定式化したもの。
  データベースが異常な内容にならないように、
  整合性制約でデータの内容が検査されます。

#### 整合性制約 14 ページ

* **空関係** empty relation —
  組をひとつももたない関係。
  関係代数による計算結果が空関係であるかを検査することで、
  整合性制約を表現できます．

* **キー** key —
  関係の制約の一種で、指定された属性集合が同じ値をもつ組が、
  関係内にふたつ以上ないことをあらわします。

* **包含従属性** inclusion dependency —
  関係間の制約の一種で、ある関係が、ほかの関係の部分集合になっていること。

* **参照制約** referential constraint —
  包含従属性のこと。ある関係の組から別の関係の組を
  参照しているようにみえるため、参照制約ともよばれます。

* **外部キー** foreigh key —
  包含従属性における属性集合のこと。
  ある関係からみて、外部の関係のキーを参照しているようにみえるため。



[Tutorial]:    http://www.dcs.warwick.ac.uk/~hugh/TTM/The-Relational-Model.pdf
[SQL]:         http://ja.wikipedia.org/wiki/SQL
[Tutorial D]:  http://ja.wikipedia.org/wiki/D_(データベース言語仕様)
[Rel]:         http://dbappbuilder.sourceforge.net/Rel.php
[TTM]:         http://www.thethirdmanifesto.com
[属性]:         http://ja.wikipedia.org/wiki/属性_(データベース)
[README.md]:   example/README.md

